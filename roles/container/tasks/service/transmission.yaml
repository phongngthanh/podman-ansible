- name: Transmission Download folder
  file:
    path: '{{ transmission_download }}'
    state: directory

- name: Transmission web config
  file:
    path: '{{ transmission_web_config }}'
    state: directory

- name: Transmission pod
  containers.podman.podman_pod:
    name: transmission
    network: caddy
    state: '{{ transmission_state }}'
    
- name: Transmission
  containers.podman.podman_container:
    name: transmission-web
    image: 'ghcr.io/linuxserver/transmission:{{ transmission_tag }}'
    env:
      PUID: '{{ global_puid }}'
      PGID: '{{ global_pgid }}'
    #   TRANSMISSION_WEB_HOME=/combustion-release/ #optional
      USER: '{{ transmission_user }}' #optional
      PASS: '{{ transmission_password }}' #optional
    volumes:
      - '/etc/localtime:/etc/localtime:ro,z'
      - '{{ transmission_web_config }}:/config:U,z'
      - '{{ transmission_download }}:/downloads'
      # Watch folder for auto download
      # - '{{ transmission_watch }}:/watch'
    pod: transmission
    # ports:
    #   - 9091:9091
    #   - 51413
    #   - 51413/udp
    restart_policy: 'on-failure:3'
    state: '{{ transmission_state }}'