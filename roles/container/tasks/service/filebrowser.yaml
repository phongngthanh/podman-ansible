- name: Create empty file for filebrowser
  ansible.builtin.copy:
    content: ""
    dest: "{{ item }}"
    force: false
    mode: "0600"
  loop:
    - "{{ filebrowser_volume }}/database.db"
    - "{{ filebrowser_volume }}/.filebrowser.json"

- name: Filebrowser
  containers.podman.podman_container:
    env:
      TZ: "{{ global_timezone }}"
    image: docker.io/filebrowser/filebrowser:latest@sha256:a55d285a5c1b5c7fb6cb55fb4957b3cb4ecfa63d42104e6235ce98d2cb2135e4
    name: filebrowser-web
    volumes:
      - "{{ global_media }}:/srv:ro"
      - "{{ filebrowser_volume }}/database.db:/database.db:U,z"
      - "{{ filebrowser_volume }}/.filebrowser.json:/.filebroser.json:U,z"
