- name: Podman
  become: True
  dnf:
    name:
      - slirp4netns
      - podman-docker
    state: latest

- name: Podman testing repo
  become: True
  dnf:
    name:
      - podman
    enablerepo: updates-testing
    state: latest

- name: Create container config folder
  file:
    path: '~/.config/containers'
    state: directory

- name: Change podman registries configuration
  copy:
    src: 'podman/registries.conf'
    dest: '~/.config/containers/registries.conf'

- name: Setup privileged ports
  sysctl:
    name: net.ipv4.ip_unprivileged_port_start
    value: '80'
    sysctl_set: yes
  become: yes