- name: Template the ansible systemd service
  vars:
    - systemd_description: "{{ item.systemd_description }}"
    - systemd_playbook: "{{ item.name }}"
    - command: "{{ item.command }}"
  ansible.builtin.template:
    src: container/ansible.service.j2
    dest: "/home/{{ ansible_user }}/.config/systemd/user/{{ item.name }}.service"
  loop: "{{ systemd.podman.service }}"
  notify: Run the systemd service

- name: Template the ansible timer
  vars:
    - timer_description: "{{ item.timer_description }}"
  ansible.builtin.template:
    src: container/ansible.timer.j2
    dest: "/home/{{ ansible_user }}/.config/systemd/user/{{ item.name }}.timer"
  loop: "{{ systemd.podman.timer }}"
  notify: Run the systemd timer
